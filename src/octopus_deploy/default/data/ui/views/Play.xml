<dashboard script="autodiscover.js, last3monthsdeployments.js" stylesheet="octopusdeploy.css">
  <label>Summary</label>

  <row grouping="2">
    <html>
      <h2>Last 3 Months deployments</h2>
      <div id="last3monthsdeployments"/>
    </html>
    <table id="last3monthsdeploymentsTable" style="visibility: hidden;">
      <searchString>sourcetype="octopus:deployment" | rename Id as DeploymentId | join EnvironmentId [ search sourcetype="octopus:environment" | rename Id as EnvironmentId, Name as EnvironmentName ] | timechart count(DeploymentId) span=1month by EnvironmentName</searchString>
    </table>
  </row>
  <row>
    <html>
      <h2>With Auto-Discovery</h2>

      <div class="splunk-manager"
        data-options='{ "search": "sourcetype=octopus:deployment | rename Id as DeploymentId | join EnvironmentId [ search sourcetype=octopus:environment | rename Id as EnvironmentId, Name as EnvironmentName ] | timechart count(DeploymentId) span=1month by EnvironmentName" }'
        data-require="splunkjs/mvc/searchmanager"
        id="chart-search2"/>

      <div class="splunk-view"
        data-options='{ "managerid": "chart-search2", "type": "stackedAreaChart" }'
        data-require="splunkjs/mvc/d3chart/d3chartview"
        id="chart2"/>
    </html>
  </row>
</dashboard>
